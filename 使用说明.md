# Tron 靓号生成工具 - 使用说明

## 快速开始

### 1. 解压文件

将压缩包解压到任意目录：

```bash
# Linux
tar -xzvf trap-factory-linux.tar.gz

# Windows
# 使用解压工具解压 trap-factory-win.zip
```

### 2. 添加执行权限（Linux）

```bash
chmod +x factory-linux profanity.x64
```

### 3. 查看帮助

```bash
# Linux
./factory-linux help
# 或
./factory-linux -h
# 或
./factory-linux --help

# Windows
factory-win.exe help
```

## 文件说明

打包后的文件包含：

- **factory-linux** / **factory-win.exe** - 主程序
- **profanity.x64** / **profanity.exe** - GPU 加速工具（必需）
- **profanity.txt** - 匹配模式文件（必需，用于 5a/6a/7a/8a 任务）
- **使用说明.md** - 本文件

## 使用方式

程序支持两种运行模式：

### 模式一：build 模式（直接生成）

直接在命令行生成靓号地址。

**基本格式：**
```
<可执行文件> build <模仿的地址> <前几位一致> <后几位一致> <生成几个地址>
```

**参数说明：**
- `模仿的地址`: 要匹配的目标地址模板
- `前几位一致`: 地址前缀需要匹配的字符数（例如：`1` 表示第一位必须是 T）
- `后几位一致`: 地址后缀需要匹配的字符数（例如：`3` 表示后三位必须是 888）
- `生成几个地址`: 生成多少个匹配的地址后退出

**使用示例：**

```bash
# Linux 示例
# 生成第一位是 T, 后三位是 888 的靓号, 生成 1 个匹配的地址后退出
./factory-linux build TTTCqtavqZiKEMVYgEQSN2b91h88888888 1 3 1

# 生成第一位是 T, 后四位是 6666 的靓号, 生成 5 个匹配的地址后退出
./factory-linux build TTTCqtavqZiKEMVYgEQSN2b91h66666666 1 4 5

# Windows 示例
.\factory-win.exe build TTTCqtavqZiKEMVYgEQSN2b91h88888888 1 3 1
.\factory-win.exe build TTTCqtavqZiKEMVYgEQSN2b91h66666666 1 4 5
```

**输出格式：**
```
<私钥> <地址> (生成数量: <已生成的地址总数>)
```

**示例输出：**
```
60641bd35aaf9df6472107f8cc11dce1f91f64c545177cff4be504ba064cbb7b TGNrA1SQfL2SPLGzsnyaWYHDiSCHXS888z (生成数量: 124048000)
```

### 模式二：server 模式（服务器模式）

作为服务器运行，从 Redis 队列中获取任务并处理。

**启动方式：**

```bash
# Linux
./factory-linux server

# Windows
factory-win.exe server
```

**工作原理：**

1. 程序连接到 Redis 服务器（配置已内置）
2. 监听输入队列 `address_producer`，等待任务
3. 处理任务并生成靓号地址
4. 将结果推送到输出队列 `address_consumer`

**任务格式（JSON）：**

发送到 Redis 队列 `address_producer` 的任务格式：

```json
{
  "taskId": "任务ID",
  "taskType": "任务类型",
  "customFormat": "自定义格式（可选）"
}
```

**支持的任务类型：**

- **`5a`, `6a`, `7a`, `8a`**: 生成后 5/6/7/8 位相同的地址
  - 示例：`{"taskId": "123", "taskType": "5a"}`
  
- **`custom_address`**: 自定义格式
  - 需要提供 `customFormat` 字段，格式：`前缀-后缀`
  - 示例：`{"taskId": "123", "taskType": "custom_address", "customFormat": "TABC-8888"}`

**返回结果格式（JSON）：**

结果会推送到 Redis 队列 `address_consumer`：

```json
{
  "taskId": "任务ID",
  "status": "completed",
  "result": {
    "privateKey": "私钥",
    "address": "地址",
    "totalGenerated": 生成的总数量
  }
}
```

如果任务失败：

```json
{
  "taskId": "任务ID",
  "status": "failed"
}
```

## 环境要求

### Linux

- 支持 OpenCL 的 GPU（NVIDIA/AMD/Intel）
- OpenCL 驱动已安装
- 确保 `profanity.x64` 有执行权限

### Windows

- 支持 OpenCL 的 GPU（NVIDIA/AMD/Intel）
- 已安装显卡驱动
- 可能需要安装 Visual Studio 运行库

### 验证 GPU 环境（Linux）

```bash
# 安装 clinfo（如果未安装）
sudo apt install -y clinfo  # Ubuntu/Debian

# 验证 GPU
clinfo | grep -i "device name"
```

如果能看到显卡信息（如 `NVIDIA GeForce RTX 4090`），说明环境配置正确。

## 常见问题

### 1. 提示 "可执行文件不存在"

**问题：** 程序找不到 `profanity.x64` 或 `profanity.exe`

**解决：** 确保 `profanity.x64`（Linux）或 `profanity.exe`（Windows）与主程序在同一目录下

### 2. 提示 "靓号模板文件不存在"

**问题：** 程序找不到 `profanity.txt` 文件

**解决：** 确保 `profanity.txt` 文件与主程序在同一目录下

### 3. GPU 无法使用

**问题：** 程序运行缓慢或报错

**解决：**
- 检查 GPU 驱动是否已安装
- 验证 OpenCL 环境：运行 `clinfo` 查看 GPU 信息
- 确保显卡支持 OpenCL

### 4. Redis 连接失败（server 模式）

**问题：** 启动 server 模式时提示连接失败

**解决：**
- 检查 Redis 服务器是否可访问
- 检查网络连接
- Redis 配置已内置在程序中，如需修改请联系开发者

## 注意事项

1. **私钥安全**：生成的私钥请妥善保管，不要泄露给他人
2. **地址验证**：使用生成的地址前，请验证私钥和地址的对应关系
3. **多签保护**：建议对生成的地址启用多签功能，提高安全性
4. **文件完整性**：确保所有必需文件都在同一目录下
5. **任务超时**：server 模式下，单个任务处理超时时间为 30 分钟

## 技术支持

如遇到问题，请提供以下信息：
- 操作系统版本
- GPU 型号
- 错误信息
- 运行命令

---

**版本信息：** 请查看程序帮助信息获取版本号
